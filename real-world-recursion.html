<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Is Recursion Used In The Real World?</title>
    <meta name="description" content="Programming practice projects designed to take your Python coding chops to the next level">
    <meta name="author" content="Louie Dinh">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://pythonpracticeprojects.com/theme/html5.js"></script>
    <![endif]-->

    <!-- start Mixpanel -->
    <script type="text/javascript">
        (function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
        mixpanel.init("f648b3a9798e7c489b48fb616f33abfe");

        mixpanel.track("Page Visit!");
    </script>
    <!-- end Mixpanel -->

    <!-- Start SumoMe -->
    <script src="//load.sumome.com/" data-sumo-site-id="3985b6f2e1d26b66de9bd40994b14446ac22d852d057002541f559342aecd669" async></script>
    <!-- End SumoMe -->

    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link href="http://pythonpracticeprojects.com/theme/local.css" rel="stylesheet">
    <link href="http://pythonpracticeprojects.com/theme/pygments.css" rel="stylesheet">
    <link href="http://pythonpracticeprojects.com/theme/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Gudea:400,400italic|Alegreya+SC' rel='stylesheet' type='text/css'>
</head>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid">
      <div class="span8">
	<a href="http://pythonpracticeprojects.com" class="brand">Python Practice Projects</a>
      </div>

      <div class="span4" id="blog-nav">
	<ul class="nav nav-pills pull-right">

        <li><a href="http://discourse.pythonpracticeprojects.com">Discussion</a></li>
       <li><a href="https://gumroad.com/l/cSIzC">Buy eBook</a></li>
       <li><a href="http://pythonpracticeprojects.com">Projects</a></li>
	    <li  class="active" >
	      <a href="http://pythonpracticeprojects.com/category/blog.html ">Blog</a>
        </li>
	</ul>
      </div>
    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">

        <div class="span10">
    <div class='article'>
      <div class="row-fluid">
           <div class="content-title span9">
             <h1>Is Recursion Used In The Real World?</h1b>
           </div>
      </div>
    <div class="row-fluid">
      <div class="span2">
<p>Mon 27 October 2014 </p>

<p style="text-align: left;">
Filed under <a href="http://pythonpracticeprojects.com/category/blog.html">Blog</a>
</p>
<p style="text-align: left;">
 
    Tags <a href="http://pythonpracticeprojects.com/tag/snippets.html">snippets</a> </p>
<p>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="louiedinh">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</p>
      </div>
      
      <div class="span8">
	<p>I came across this question while reading through the Python mailing list. I was actually sort of offended. Why would universities across the world agree to teach
this foundational topic in Computer Science if it <em>wasn't</em> useful? Recursion is the natural approach to a class of problems that would be much more difficult 
to solve with a for loop.</p>
<h2>Recognizing a Recursive Problem</h2>
<p>When you see a problem that looks like a russion doll, think recursion.</p>
<p>Russian Doll Picture:</p>
<p>So a russian doll is one where you have a big doll, but if you open it up there is a smaller doll inside.
This keeps going until you get to the smallest doll that you can't open. Now Imagine that you're trying to paint russian dolls,
however once you've painted one, you can't open it up because you have to wait for it to dry. What do you do? </p>
<p>You open up the first doll, find a doll inside, open up the second doll, and keep going until you've found the smallest one.
 You paint the smallest one, then put it back into the second smallest, then repeat until you've painted all of them.</p>
<p>Now that you have the intuition, let's look at an actual code example.</p>
<h2>My Real World Example</h2>
<p>This is an example derived from my own work. I've just swapped the actual subject matter to recipes because it's easier to relate to; the crux of the problem is the same.</p>
<p>Note: All of this is in Python &gt;= 3.3</p>
<p>Here is the nested structure we are dealing with:</p>
<div class="highlight"><pre><span class="n">recipes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">{</span>
        <span class="err">&#39;</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">shortening</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">apples</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">cinnamon</span><span class="err">&#39;</span><span class="p">],</span>
        <span class="err">&#39;</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">ratings</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">john</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">emily</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">mom</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">4</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">{</span>
        <span class="err">&#39;</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">peanut_butter</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">butter</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">],</span>
        <span class="err">&#39;</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">45</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">peanuts</span><span class="err">&#39;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">{</span>
        <span class="err">&#39;</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">milk</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">clams</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">vegetable_stock</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">salt</span><span class="err">&#39;</span><span class="p">],</span>
        <span class="err">&#39;</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="err">&#39;</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">shellfish</span><span class="err">&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Each recipe has commonalities but not all recipes are guaranteed to have all keys.
For example, allergens is not present in apple pie but it is in peanut butter cookies
and clam chowder. Similarly, apple pie has ratings but neither of the other two do.</p>
<p>I'd really like an easy way to reach in and check for the existence of a key at any level of nesting.
So I'd like to see if there is a rating from john for my apple pie recipe. </p>
<p>One naive way to solve this is to just do the checks.</p>
<div class="highlight"><pre>    <span class="n">result</span> <span class="o">=</span> <span class="n">False</span>
    <span class="k">if</span> <span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span><span class="o">:</span>
         <span class="k">if</span> <span class="err">&#39;</span><span class="n">ratings</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span><span class="p">[</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span><span class="p">]</span><span class="o">:</span>
            <span class="k">if</span> <span class="err">&#39;</span><span class="n">john</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span><span class="p">[</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span><span class="p">][</span><span class="err">&#39;</span><span class="n">ratings</span><span class="err">&#39;</span><span class="p">]</span><span class="o">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">True</span>

    <span class="n">print</span> <span class="n">result</span>
</pre></div>


<p>Alternatively, you  could combine all the checks into a line by relying on Python's ability to short circuit. A bit better, but not much.</p>
<div class="highlight"><pre>    <span class="n">result</span> <span class="o">=</span> <span class="n">False</span>
    <span class="k">if</span> <span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span> <span class="n">and</span> <span class="err">&#39;</span><span class="n">ratings</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span><span class="p">[</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span><span class="p">]</span> <span class="n">and</span> <span class="err">&#39;</span><span class="n">john</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">recipes</span><span class="p">[</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="err">&#39;</span><span class="p">][</span><span class="err">&#39;</span><span class="n">ratings</span><span class="err">&#39;</span><span class="p">]</span><span class="o">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">True</span>
    <span class="n">print</span> <span class="n">result</span>
</pre></div>


<p>Still Ugghz. </p>
<h2>Let's Use Recursion!</h2>
<p>The basic idea is to go into the dictionary and flatten all of the nested dictionaries so that the keys
are accessible at the top level. Then we could write code like:</p>
<div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">False</span>
<span class="k">if</span> <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="o">/</span><span class="n">john</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">flattened</span><span class="p">(</span><span class="n">recipes</span><span class="p">)</span><span class="o">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">True</span>
<span class="n">print</span> <span class="n">result</span>
</pre></div>


<p>Here is the first step towards flatten. It will only do one level of flattening. That is, if the top level dictionary has a dictionary as a value, it will fuse them together.
We do this without recursion but it's an important step towards the full solution.</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">flatten_one</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">dict</span><span class="p">)</span><span class="o">:</span>
        <span class="err">#</span> <span class="n">If</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">flatten</span> <span class="n">it</span> <span class="n">one</span> <span class="n">level</span><span class="p">.</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="n">in</span> <span class="n">obj</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dict</span><span class="p">)</span><span class="o">:</span>
                <span class="k">for</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">subvalue</span> <span class="n">in</span> <span class="n">value</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="o">:</span>
                    <span class="n">flat_key</span> <span class="o">=</span> <span class="sc">&#39;/&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">])</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">flat_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">subvalue</span>
            <span class="nl">else:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="nl">else:</span>
        <span class="err">#</span> <span class="n">otherwise</span> <span class="n">just</span> <span class="k">return</span> <span class="n">the</span> <span class="n">object</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="n">pprint</span><span class="p">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">flatten_one</span><span class="p">(</span><span class="n">recipes</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre><span class="p">{</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">shortening</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">apples</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">cinnamon</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">emily</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">john</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">mom</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">4</span><span class="p">},</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">shellfish</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">milk</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">clams</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">vegetable_stock</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">salt</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">peanuts</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">45</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">peanut_butter</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">butter</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">20</span><span class="p">}</span>
</pre></div>


<p>Now the problem is if there are nested dictionaries, our solution doesn't work. So in this example, the key apple_pie/ratings exists,
but the value is still a dictionary. What we'd really like is for deeply nested dictionaries to get pulled up into the top level.</p>
<p>Here is the full implementation:</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">flatten</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">list</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">If</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">list</span> <span class="n">flatten</span> <span class="n">every</span> <span class="n">sub</span> <span class="n">element</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="n">in</span> <span class="n">obj</span><span class="o">:</span>
            <span class="n">flat_elt</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">flat_elt</span><span class="p">)</span>
    <span class="n">elif</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">dict</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">If</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">flatten</span> <span class="n">it</span> <span class="n">one</span> <span class="n">level</span><span class="p">.</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="n">in</span> <span class="n">obj</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="o">:</span>
            <span class="k">if</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dict</span><span class="p">)</span><span class="o">:</span>
                <span class="n">flat_value</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">subvalue</span> <span class="n">in</span> <span class="n">flat_value</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="o">:</span>
                    <span class="n">flat_key</span> <span class="o">=</span> <span class="sc">&#39;/&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="n">key</span><span class="p">,</span> <span class="n">subkey</span><span class="p">])</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">flat_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">subvalue</span>
            <span class="nl">else:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="nl">else:</span>
        <span class="err">#</span> <span class="n">otherwise</span> <span class="n">just</span> <span class="k">return</span> <span class="n">the</span> <span class="n">object</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">obj</span>

    <span class="k">return</span> <span class="n">result</span>


<span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">=== Flattened ===</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">recipes</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre><span class="p">{</span><span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">shortening</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">apples</span><span class="err">&#39;</span><span class="p">,</span>
                           <span class="err">&#39;</span><span class="n">cinnamon</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="o">/</span><span class="n">emily</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="o">/</span><span class="n">john</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="o">/</span><span class="n">mom</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">shellfish</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">milk</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">clams</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">vegetable_stock</span><span class="err">&#39;</span><span class="p">,</span>
                              <span class="err">&#39;</span><span class="n">salt</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">clam_chowder</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">allergens</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">peanuts</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">cook_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">45</span><span class="p">,</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">ingredients</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">[</span><span class="err">&#39;</span><span class="n">flour</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">sugar</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">peanut_butter</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">butter</span><span class="err">&#39;</span><span class="p">,</span>
                                       <span class="err">&#39;</span><span class="n">eggs</span><span class="err">&#39;</span><span class="p">],</span>
 <span class="err">&#39;</span><span class="n">peanut_butter_cookies</span><span class="o">/</span><span class="n">prep_time</span><span class="err">&#39;</span><span class="o">:</span> <span class="mi">20</span><span class="p">}</span>
</pre></div>


<p>There! Now we can actually access our recipes in the desired way.</p>
<div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">False</span>
<span class="k">if</span> <span class="err">&#39;</span><span class="n">apple_pie</span><span class="o">/</span><span class="n">ratings</span><span class="o">/</span><span class="n">john</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">flattened</span><span class="p">(</span><span class="n">recipes</span><span class="p">)</span><span class="o">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">True</span>
<span class="n">print</span> <span class="n">result</span>
</pre></div>


<p>There you go. A real world lesson in recursion with all the code example fixings!</p>
<p>If you enjoyed this tutorial, sign up for the Python Practice Projects mailing list to get more real world examples for learning Python!</p>
	<hr />
    Like what you just read? <a href="http://www.eepurl.com/FnX4f">Subscribe to Python Practice Projects</a> for more insights on practice, programming and the slow path to victory.
      </div>
    </div>
    <div class="span10">
      <h3>Comments</h3>
    
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'pythonpracticeprojects'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>  
    </div>
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
	<div class="social span2" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
	      Social
	    </li>
	    <li><a href="http://twitter.com/louiedinh"><i class="icon-twitter" style="color: #1f334b"></i>twitter</a></li>
	    <li><a href="http://www.linkedin.com/profile/view?id=103017614"><i class="icon-linkedin" style="color: #1f334b"></i>linkedin</a></li>

	  </ul>
	</div>
        <div class="links span2" align="center">
          <ul class="nav nav-list">
            <li class="nav-header"> 
              Links
            </li>
            
            <li><a href="http://jessenoller.com/good-to-great-python-reads/">Good to Great</a></li>
            <li><a href="http://gnosis.cx/publish/tech_index_cp.html">Charming Python</a></li>
            <li><a href="http://www.python.org/dev/peps/pep-0008/">PEP8</a></li>
            <li><a href="http://docs.python-guide.org/en/latest/">Hitchhiker's Guide</a></li>
            <li><a href="http://www.pythonweekly.com/">Python Weekly</a></li>
          </ul>
        </div>
	<div class="site-nav span2" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
              Site
            </li>
            <li><a href="http://pythonpracticeprojects.com"><i class="icon-home" style="color: #1f334b">
                </i>Home</a></li>
            <li><a href="http://pythonpracticeprojects.com/archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Archives</a></li>
	    <li><a href="http://pythonpracticeprojects.com/tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Tags</a></li>
	    
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p align="center"><a href="http://pythonpracticeprojects.com">Python Practice Projects</a>
      &copy; Louie Dinh
    Powered by <a href="github.com/getpelican/pelican">Pelican</a> and
        <a href="https://twitter.github.com/bootstrap">Twitter Bootstrap</a>. 
        Icons by <a href="http://fortawesome.github.com/Font-Awesome">Font Awesome</a> and 
        <a href="http://gregoryloucas.github.com/Font-Awesome-More">Font Awesome More</a></p>

  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>


<script>var _gaq=[['_setAccount','UA-39716444-2'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

</body>
</html>